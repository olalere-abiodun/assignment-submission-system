<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Assignment Submission System - Home</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../../static/styles/index.css">
  <link rel="stylesheet" href="../../static/styles/dashboard.css">
  <!-- Favicon -->
  <link rel="icon" href="../../static/images/favicon.ico" type="image/x-icon">
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

</head>

<body>
  <!-- Enroll Course Modal -->
  <div class="modal fade" id="enrollCourseModal" tabindex="-1" aria-labelledby="createCourseModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content rounded-4 shadow">
        <div class="modal-header p-4 pb-2 border-bottom-0">
          <h3 class="fw-bold mb-0 fs-5 mb-3" id="createCourseModalLabel">Enroll Course</h3>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-4 pt-0">
          <div id="form-messages" class="alert d-none" role="alert"></div>
          <form id="enrollForm">
            <div class="mb-3">
              <label for="course_title" class="form-label">Course Title</label>
              <select class="form-select form-control-lg" aria-label="Default select example" id="course_title">
                <option selected disabled>Select Course Title</option>

              </select>
            </div>
            <div class="mb-3">
              <label for="course_code" class="form-label">Course Code</label>
              <input id="course_code" class="form-control form-control-lg" type="text" placeholder="Course Code">
            </div>

            <div class="mb-3 text-end">
              <button class="btn btn-primary px-4 me-md-2" type="submit">Enroll</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>



  <!-- Theme Toggle Dropdown -->
  <div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
    <button class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center active" id="bd-theme" type="button"
      aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (auto)">
      <i class="bi bi-circle-half my-1 theme-icon-active "></i>
      <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
    </button>

    <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
      <li>
        <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light"
          aria-pressed="false">
          <i class="bi bi-sun-fill me-2 opacity-50"></i>
          Light
          <i class="bi bi-check2 ms-auto d-none"></i>
        </button>
      </li>
      <li>
        <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark"
          aria-pressed="false">
          <i class="bi bi-moon-stars-fill me-2 opacity-50"></i>
          Dark
          <i class="bi bi-check2 ms-auto d-none"></i>
        </button>
      </li>
      <li>
        <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto"
          aria-pressed="true">
          <i class="bi bi-circle-half me-2 opacity-50"></i>
          Auto
          <i class="bi bi-check2 ms-auto d-none"></i>
        </button>
      </li>
    </ul>
  </div>

  <header class="navbar sticky-top flex-md-nowrap p-0 shadow" id="navbar">
    <a class="navbar-brand col-md-3 col-lg-2 me-0 my-3 px-3 fs-6 bt-4 text-white system-name"
      href="index.html">Assignment Submission</a>

    <ul class="navbar-nav flex-row d-md-none">
      <li class="nav-item text-nowrap">
        <button class="nav-link px-3 text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSearch"
          aria-controls="navbarSearch" aria-expanded="false" aria-label="Toggle search">
          <i class="bi bi-search"></i>
        </button>
      </li>
      <li class="nav-item text-nowrap">
        <button class="nav-link px-3 text-white" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu"
          aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
          <i class="bi bi-list"></i>
        </button>
      </li>
    </ul>

    <div id="navbarSearch" class="navbar-search w-100 collapse">
      <input class="form-control w-100 rounded-0 border-0" type="text" placeholder="Search" aria-label="Search">
    </div>
  </header>
  <div class="row container-fluid">
    <div class="sidebar border-right col-md-4 col-lg-2 p-0 bg-body-tertiary ">
      <div class="offcanvas-md offcanvas-end min-vh-100" tabindex="-1" id="sidebarMenu"
        aria-labelledby="sidebarMenuLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title system-name" id="sidebarMenuLabel">Assignment Submission</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu"
            aria-label="Close"></button>
        </div>
        <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto">
          <div class="mx-auto mb-2 mb-md-0">
            <p><span class="fw-bold">Welcome:</span> <span id="usernameholder" class="text-secondary"></span> </p>
          </div>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2 " aria-current="page" href="index.html">
                <i class="bi bi-house-fill"></i> Dashboard
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2 active" href="courses.html">
                <i class="bi bi-plus-circle"></i>Courses
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2" href="assignments.html">
                <i class="bi-file-earmark-plus"></i>Assignments
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2" href="profile.html">
                <i class="bi-journal-plus"></i> Submissions
              </a>
            </li>

          </ul>

          <hr class="my-4">

          <ul class="nav flex-column mb-auto">
            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2" href="#">
                <i class="bi bi-gear-wide-connected"></i> Profile Settings
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link d-flex align-items-center gap-2" href="#">
                <i class="bi bi-door-closed"></i> Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div
        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h5">Enrolled Courses</h1>


        <div class="btn-toolbar mb-2 mb-md-0">

          <button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-1"
            data-bs-toggle="modal" data-bs-target="#enrollCourseModal">
            <i class="bi bi-plus-square"></i> Enroll Course
          </button>

        </div>
      </div>
      <div class="container-fluid">
        <table class="table" id="enrolledCoursesTable">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Course Title</th>
              <th scope="col">Course Code</th>
              <th scope="col">Lecturer</th>
              <th scope="col">Actions</th>
            </tr>
          </thead id="enrolledCoursesBody">
          <tbody>
            <!-- <tr>
              <th scope="row">1</th>
              <td>Introduction to Programming</td>
              <td>CS101</td>
              <td>Dr. Smith</td>
              <td>
                <button class="btn btn-sm btn-primary">View</button>
                <button class="btn btn-sm btn-danger">Unenroll</button>
              </td>
    </tr> -->


          </tbody>


      </div>




    </main>
  </div>








  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
    crossorigin="anonymous"></script>
  <!-- jquery  -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="/static/scripts/user-info.js"></script>
  <script src="/static/scripts/load-course.js"></script>
  <script src="../../static/scripts/theme.js"></script>
  <script src="../../static/scripts/index.js"></script>
  <script>
document.addEventListener("DOMContentLoaded", function () {
  const enrolledTableBody = document.querySelector("#enrolledCoursesTable tbody");

  const token = sessionStorage.getItem("token");

  fetch("/users/me/enrollments", {
    headers: {
      Authorization: `Bearer ${token}`,
    },
  })
    .then((res) => {
      if (!res.ok) throw new Error("Failed to fetch enrollments");
      return res.json();
    })
    .then((data) => {
      enrolledTableBody.innerHTML = ""; // clear any existing rows
      data.forEach((course, index) => {
        enrolledTableBody.innerHTML += `
          <tr>
            <th scope="row">${index + 1}</th>
            <td>${course.course_name}</td>
            <td>${course.course_code}</td>
            <td>${course.lecturer_name}</td>
            <td>
              <button class="btn btn-sm btn-primary">View</button>
              <button class="btn btn-sm btn-danger">Unenroll</button>
            </td>
          </tr>
        `;
      });
    })
    .catch((err) => console.error("Error loading enrollments:", err));
});
</script>


</body>

</html>